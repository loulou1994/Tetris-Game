parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CGxr":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.setOfHexvalues=exports.resetBtn=exports.scoreEl=exports.subCanvasCtx=exports.cvsContext=exports.subCanvas=exports.canvas=exports.CLOCK_MATRICES=exports.PieceOffset=void 0,function(e){e.JLSTZ="JLSTZ",e.I="I",e.O="O"}(e=exports.PieceOffset||(exports.PieceOffset={})),exports.CLOCK_MATRICES={CLOCKWISE:{x1:0,x2:-1,y1:1,y2:0},COUNTER_CLOCKWISE:{x1:0,x2:1,y1:-1,y2:0}},exports.canvas=document.getElementById("canvas"),exports.subCanvas=document.getElementById("subCanvas"),exports.cvsContext=exports.canvas.getContext("2d"),exports.subCanvasCtx=exports.subCanvas.getContext("2d"),exports.scoreEl=document.getElementById("score"),exports.resetBtn=document.getElementById("reset"),exports.setOfHexvalues=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];
},{}],"UldJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.newBoard=exports.genHexColorCode=exports.mod=exports.createAnimation=exports.randomValue=void 0;var e=require("./tetrisBoard");function r(e){return e[Math.floor(Math.random()*e.length)]}function t(e){e.fillStyle="#00000080",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.font="32px Arial Sans-serif",e.textAlign="center",e.fillStyle="#000",e.fillText("Game Over!",e.canvas.width/2+2,e.canvas.height/2+2),e.fillStyle="#fff",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2)}function n(e){var r=0;!function n(o){var a=o-r;r=o,e.update(a),e.gameOver?t(e.ctx):(e.draw(),e.animationToken=requestAnimationFrame(n))}(0)}function o(e,r){return(e%r+r)%r}function a(e,t,n){if(void 0===t&&(t=6),void 0===n&&(n=""),t<1)return"#"+n;var o=r(e);return-1===n.indexOf(o)?a(e,--t,n+=o):a(e,t,n)}function i(){for(var r=[],t=0;t<e.GRID_ROWS;++t){r[t]=[];for(var n=0;n<e.GRID_COLUMNS;++n)r[t][n]={x:n,y:t,filled:!1,squareColor:"transparent"}}return r}exports.randomValue=r,exports.createAnimation=n,exports.mod=o,exports.genHexColorCode=a,exports.newBoard=i;
},{"./tetrisBoard":"QTdR"}],"QTdR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Board=exports.GRID_ROWS=exports.GRID_COLUMNS=exports.TILE_SIZE=void 0;var t=require("./types&declarations"),e=require("./utils");exports.TILE_SIZE=30,exports.GRID_COLUMNS=t.canvas.width/exports.TILE_SIZE,exports.GRID_ROWS=t.canvas.height/exports.TILE_SIZE;var i=function(){function t(t){this.score=0,this.blankSpace=4,this.map=(0,e.newBoard)(),this.tileSize=t}return t.prototype.draw=function(t){var e=this;t.fillStyle="#bca0dc",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#fff";for(var i=0;i<=this.map[0].length;++i){var a=i*this.tileSize-this.blankSpace>=0?i*this.tileSize-this.blankSpace:0;t.fillRect(a,0,this.blankSpace,t.canvas.height)}for(var r=0;r<=this.map.length;++r){var s=r*this.tileSize-this.blankSpace>=0?r*this.tileSize-this.blankSpace:0;t.fillRect(0,s,t.canvas.width,this.blankSpace)}this.map.forEach(function(i){i.forEach(function(i){i.filled&&(t.fillStyle=i.squareColor,t.fillRect(i.x*e.tileSize,i.y*e.tileSize,e.tileSize,e.tileSize))})})},t.prototype.removeBoardRow=function(){for(var t=0;t<this.map.length;++t){for(var e=!0,i=0;i<this.map[t].length;++i)this.map[t][i].filled||(e=!1);if(e){this.score+=2;for(var a=t;a>0;--a)for(var r=0;r<this.map[a].length;++r)this.map[a][r].filled=this.map[a-1][r].filled,this.map[a][r].squareColor=this.map[a-1][r].squareColor;for(var s=0;s<exports.GRID_COLUMNS;++s)this.map[0][s]={x:s,y:exports.GRID_ROWS-1,filled:!1,squareColor:"transparent"}}}},t}();exports.Board=i;
},{"./types&declarations":"CGxr","./utils":"UldJ"}],"j7sF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var t=require("./types&declarations"),o=require("./tetrisBoard"),i=function(){function i(t,o,i){this.x=t,this.y=o,this.board=i}return i.prototype.moveToRight=function(t){void 0===t&&(t=1),this.x+=t},i.prototype.moveToleft=function(t){void 0===t&&(t=-1),this.x+=t},i.prototype.moveToBottom=function(t){void 0===t&&(t=1),this.y+=t},i.prototype.moveToTop=function(t){void 0===t&&(t=1),this.y-=t},i.prototype.moveRight=function(t){return this.x+t<o.GRID_COLUMNS},i.prototype.moveLeft=function(t){return this.x+t>=0},i.prototype.moveDown=function(t){return this.y+t<o.GRID_ROWS},i.prototype.moveUp=function(t){return this.y+t>=0},i.prototype.isTopMostPos=function(){return this.y<0},i.prototype.checkBottomTile=function(t){return this.isTopMostPos()||this.moveDown(t)&&!this.board[this.y+t][this.x].filled},i.prototype.checkTopTile=function(t){return this.moveUp(-t)&&!this.board[this.y-t][this.x].filled},i.prototype.checkRightTile=function(t){return this.isTopMostPos()&&this.moveRight(t)||this.moveRight(t)&&!this.board[this.y][this.x+t].filled},i.prototype.checkLeftTile=function(t){return this.isTopMostPos()&&this.moveLeft(t)||this.moveLeft(t)&&!this.board[this.y][this.x+t].filled},i.prototype.checkBottomRightTile=function(t,o){return this.isTopMostPos()||this.moveDown(-o)&&this.moveRight(t)&&!this.board[this.y-o][this.x+t].filled},i.prototype.checkBottomLeftTile=function(t,o){return this.isTopMostPos()||this.moveDown(-o)&&this.moveLeft(t)&&!this.board[this.y-o][this.x+t].filled},i.prototype.checkTopRightTile=function(t,o){return this.moveUp(-o)&&this.moveRight(t)&&!this.board[this.y-o][this.x+t].filled},i.prototype.checkTopLeftTile=function(t,o){return this.moveUp(-o)&&this.moveLeft(t)&&!this.board[this.y-o][this.x+t].filled},i.prototype.checkPureRot=function(){return this.moveRight(0)&&this.moveLeft(0)&&this.moveDown(0)&&this.moveUp(0)&&!this.board[this.y][this.x].filled},i.prototype.draw=function(t,o){t.fillRect(this.x*o,this.y*o,o,o)},i.prototype.rotateTile=function(o,i){var e=this.x-o.x,s=this.y-o.y,h=(i?t.CLOCK_MATRICES.CLOCKWISE.x1:t.CLOCK_MATRICES.COUNTER_CLOCKWISE.x1)*e+(i?t.CLOCK_MATRICES.CLOCKWISE.x2:t.CLOCK_MATRICES.COUNTER_CLOCKWISE.x2)*s,r=(i?t.CLOCK_MATRICES.CLOCKWISE.y1:t.CLOCK_MATRICES.COUNTER_CLOCKWISE.y1)*e+(i?t.CLOCK_MATRICES.CLOCKWISE.y2:t.CLOCK_MATRICES.COUNTER_CLOCKWISE.y2)*s;this.x=h+o.x,this.y=r+o.y},i}();exports.Tile=i;
},{"./types&declarations":"CGxr","./tetrisBoard":"QTdR"}],"LcL7":[function(require,module,exports) {
"use strict";var t=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Piece=void 0;var e=require("./tetrisBoard"),o=require("./tile"),i=require("./utils"),r=function(){function r(t,e,o,i,r){this.board=o,this.currentPiece=t,this.offsets=e,this.tetrominoes=this.initMinos(),this.centerPiece=this.tetrominoes[1][1],this.rotationIndex=i,this.color=r}return r.prototype.initMinos=function(){var t=this;return this.currentPiece.map(function(i,r){return i.map(function(i,n){return i?new o.Tile(Math.floor(e.GRID_COLUMNS/2)+n-1,r-3,t.board):0})})},r.prototype.checkBottom=function(){for(var t=!0,e=0;e<this.tetrominoes.length;++e)for(var o=0;o<this.tetrominoes[e].length;++o)if(0!==this.tetrominoes[e][o]&&!this.tetrominoes[e][o].checkBottomTile(1)){t=!1;break}return t},r.prototype.checkRight=function(){for(var t=0;t<this.tetrominoes.length;++t)for(var e=0;e<this.tetrominoes[t].length;++e)if(0!==this.tetrominoes[t][e]&&!this.tetrominoes[t][e].checkRightTile(1))return!1;return!0},r.prototype.checkLeft=function(){for(var t=0;t<this.tetrominoes.length;++t)for(var e=0;e<this.tetrominoes[t].length;++e)if(0!==this.tetrominoes[t][e]&&!this.tetrominoes[t][e].checkLeftTile(-1))return!1;return!0},r.prototype.checkGameover=function(){for(var t=this.board[0],e=0;e<t.length;++e)if(t[e].filled)return!0;return!1},r.prototype.dropPiece=function(t){if(!t)for(var e=0;e<this.tetrominoes.length;++e)for(var o=0;o<this.tetrominoes[e].length;++o)if(0!==this.tetrominoes[e][o]){var i=this.tetrominoes[e][o],r=i.x,n=i.y;n>=0&&(this.board[n][r].filled=!0,this.board[n][r].squareColor=this.color)}},r.prototype.playNextPiece=function(t){this.currentPiece=t[0],this.offsets=t[1],this.tetrominoes=this.initMinos(),this.centerPiece=this.tetrominoes[1][1],this.rotationIndex=0},r.prototype.rotatePiece=function(t,e){var o=this,r=this.rotationIndex;(this.rotationIndex+=t?1:-1,this.rotationIndex=(0,i.mod)(this.rotationIndex,4),this.tetrominoes.forEach(function(e){e.forEach(function(e){e&&e!==o.centerPiece&&e.rotateTile(o.centerPiece,t)})}),e)&&(this.shouldOffset(r,this.rotationIndex)||this.rotatePiece(!t,!1))},r.prototype.shouldOffset=function(t,e){for(var o=!1,i=[],r=0;r<this.offsets.length;++r){var n=this.offsets[r][t],s=this.offsets[r][e];if(i[0]=n[0]-s[0],i[1]=n[1]-s[1],this.canOffset(i)){o=!0;break}}return o&&this.offsetMove(i),o},r.prototype.canOffset=function(t){return this.tetrominoes.every(function(e){return e.every(function(e){return!e||(!(0!==t[0]||0!==t[1]||!e.checkPureRot())||(!!(t[0]>0&&t[1]>0&&e.checkTopRightTile(t[0],t[1]))||(!!(t[0]<0&&t[1]<0&&e.checkBottomLeftTile(t[0],t[1]))||(!!(0===t[0]&&t[1]<0&&e.moveLeft(0)&&e.moveRight(0)&&e.checkBottomTile(-t[1]))||(!!(0===t[1]&&t[0]<0&&e.moveUp(0)&&e.moveDown(0)&&e.checkLeftTile(t[0]))||(!!(t[0]>0&&0===t[1]&&e.moveUp(0)&&e.moveDown(0)&&e.checkRightTile(t[0]))||!!(0===t[0]&&t[1]>0&&e.moveRight(0)&&e.moveLeft(0)&&e.checkTopTile(t[1]))))))))})})},r.prototype.offsetMove=function(e){this.tetrominoes.forEach(function(o){o.forEach(function(o){if(o){var i=t([],e,!0),r=i[0],n=i[1];r<0?o.moveToleft(r):r>=0&&o.moveToRight(r),n<0?o.moveToBottom(-n):n>=0&&o.moveToTop(n)}})})},r}();exports.Piece=r;
},{"./tetrisBoard":"QTdR","./tile":"j7sF","./utils":"UldJ"}],"YmuU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=void 0;var e=function(){return function(e){window.addEventListener("keydown",function(r){switch(r.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"x":case"s":e.playerinput.includes(r.key)||e.playerinput.push(r.key);break;default:return}}),window.addEventListener("keyup",function(r){switch(r.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"x":case"s":e.playerinput.includes(r.key)&&e.playerinput.splice(e.playerinput.indexOf(r.key),1);break;default:return}})}}();exports.Input=e;
},{}],"g2vN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initiatePiece=exports.PIECES=exports.OFFSETS=void 0;var e=require("./types&declarations"),i=require("./utils");function r(){var r=(0,i.randomValue)(Object.keys(e.PieceOffset)),t=exports.OFFSETS[r],o=exports.PIECES[r];return"pieceCollection"===o.kind?[(0,i.randomValue)(o.pieceCords),t]:[o.pieceCords,t]}exports.OFFSETS={JLSTZ:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],O:[[[0,0],[0,-1],[-1,-1],[-1,0]]]},exports.PIECES={JLSTZ:{pieceCords:[[[1,0,0],[1,1,1],[0,0,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[1,1,1],[0,0,0]],[[1,1,0],[0,1,1],[0,0,0]]],kind:"pieceCollection"},O:{pieceCords:[[0,1,1],[0,1,1],[0,0,0]],kind:"piece"},I:{pieceCords:[[0,0,0],[1,1,1],[0,0,0]],kind:"piece"}},exports.initiatePiece=r;
},{"./types&declarations":"CGxr","./utils":"UldJ"}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var s,r=0,n=t.length;r<n;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var t=require("./types&declarations"),i=require("./tetrisBoard"),s=require("./currentPiece"),r=require("./inputHandler"),n=require("./utils"),o=require("./piecesController"),c=function(){function i(i,c,a,h){this.playerinput=[],this.scoreElement=t.scoreEl,this.animationToken=0,this.ctx=i,this.subCvsCtx=c,this.board=a,this.piece=new(s.Piece.bind.apply(s.Piece,e(e([void 0],(0,o.initiatePiece)(),!1),[this.board.map,0,(0,n.genHexColorCode)(t.setOfHexvalues)],!1))),this.nextPiece=(0,o.initiatePiece)(),this.inputClass=new r.Input(this),this.gameSpeedPerMiliSec=200,this.miliSecPerFrames=2e3/16.67,this.gameTimeInterval=0,this.frameTimeInterval=0,this.gameOver=!1}return i.prototype.update=function(i){if(this.gameTimeInterval+=i,this.frameTimeInterval+=i,this.gameTimeInterval>=this.gameSpeedPerMiliSec){this.playerinput.includes("s")&&this.piece.rotatePiece(!0,!0),this.playerinput.includes("x")&&this.piece.rotatePiece(!1,!0);var r=this.piece.checkBottom();r?this.piece.tetrominoes.forEach(function(e){e.forEach(function(e){e&&e.moveToBottom()})}):(this.piece.dropPiece(r),this.board.removeBoardRow(),this.scoreElement.textContent=this.board.score.toString(),this.piece=new(s.Piece.bind.apply(s.Piece,e(e([void 0],this.nextPiece,!1),[this.board.map,0,(0,n.genHexColorCode)(t.setOfHexvalues)],!1))),this.nextPiece=(0,o.initiatePiece)()),this.gameOver=this.piece.checkGameover(),this.gameTimeInterval=0}this.frameTimeInterval>=this.miliSecPerFrames&&(this.playerinput.includes("ArrowRight")&&this.piece.checkRight()&&this.piece.tetrominoes.forEach(function(e){e.forEach(function(e){e&&e.moveToRight()})}),this.playerinput.includes("ArrowLeft")&&this.piece.checkLeft()&&this.piece.tetrominoes.forEach(function(e){e.forEach(function(e){e&&e.moveToleft()})}),this.playerinput.includes("ArrowDown")&&this.piece.checkBottom()&&this.piece.tetrominoes.forEach(function(e){e.forEach(function(e){e&&e.moveToBottom()})}),this.frameTimeInterval=0)},i.prototype.draw=function(){var e=this;this.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),this.board.draw(this.ctx),this.piece.tetrominoes.forEach(function(t){t.forEach(function(t){t&&(e.ctx.fillStyle=e.piece.color,t.draw(e.ctx,e.board.tileSize))})}),this.drawNextPiece()},i.prototype.drawNextPiece=function(){var e=this;this.subCvsCtx.clearRect(0,0,t.subCanvasCtx.canvas.width,t.subCanvasCtx.canvas.height),this.subCvsCtx.fillStyle="#ef709b",this.subCvsCtx.fillRect(0,0,this.subCvsCtx.canvas.width,this.subCvsCtx.canvas.height),this.subCvsCtx.fillStyle="#000",this.nextPiece[0].forEach(function(t,i){t.forEach(function(t,s){t&&e.subCvsCtx.fillRect(20*(s+1),20*(i+1),20,20)})})},i}();exports.Game=c;var a=new c(t.cvsContext,t.subCanvasCtx,new i.Board(i.TILE_SIZE),i.TILE_SIZE);(0,n.createAnimation)(a),t.resetBtn.addEventListener("click",function(){cancelAnimationFrame(a.animationToken),t.scoreEl.textContent="0",a=new c(t.cvsContext,t.subCanvasCtx,new i.Board(i.TILE_SIZE),i.TILE_SIZE),(0,n.createAnimation)(a)});
},{"./types&declarations":"CGxr","./tetrisBoard":"QTdR","./currentPiece":"LcL7","./inputHandler":"YmuU","./utils":"UldJ","./piecesController":"g2vN"}]},{},["B6dB"], null)
//# sourceMappingURL=src.116e6fae.js.map